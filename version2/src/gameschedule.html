<!DOCTYPE html>

<!-- File Size: 2KB | Load Time: 13.3ms -->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="../style/style.css">
  <title>Game Schedule</title>
</head>

<body onload="btnStatus()">
  <nav class="navbar">
    <a href="./home.html" id="logo">TeamWatch</a>
    <a href="./home.html">Home</a>
    <a href="./gameschedule.html">Game</a>
    <a href="./players.html">Roster</a>
    <a href="./login.html" id="logout" onclick="logoutClean()"> Logout</a>
  </nav>

  <input type="button" onclick="location.href='./addgame.html';" value="Add Game" id="addGameBtn">
  <input type="button" onclick="location.href='./addpractice.html';" value="Add Practice" id="addPracBtn">


  <output id="outputgames">
  </output>


  <script type="text/javascript">

    var gArray = JSON.parse(localStorage.getItem('games'));

    window.addEventListener('DOMContentLoaded', function(){

      var myname = localStorage.getItem('myteamname'); 
      var disGam = document.getElementById('outputgames'); 
      var index = 0;

      for (var i = 0; i < gArray.length; i++) {
        
        var todayDate = new Date(); 
        var compareDate = new Date(gArray[i].date); 

        if( todayDate.setHours(0, 0, 0, 0) == compareDate.setHours(0, 0, 0, 0) ) {

          disGam.innerHTML += "<div class='box0'><h2>Today's Game: " + gArray[i].date 
          + "</h2><h3>" + myname + " vs " + gArray[i].opponentname 
          + "</h3><p>" + gArray[i].date + " " + gArray[i].time 
          + "</p><p>" + gArray[i].location 
          + "</p><p>" + gArray[i].status 
          + "</p><input type='button' value='View Stats' class='viewStatsBtn'>"
          + "<input type='button' value='Edit Game' class='editGameBtn'>"; 

          index = 1; 
        }

        else if(todayDate.setHours(0, 0, 0, 0) > compareDate.setHours(0, 0, 0, 0)) {
          disGam.innerHTML += "<div class='box0'><h2>Previous Game: " + gArray[i].date 
          + "</h2><h3>" + myname + " vs " + gArray[i].opponentname 
          + "</h3><p>" + gArray[i].date + " " + gArray[i].time 
          + "</p><p>" + gArray[i].location 
          + "</p><p>" + gArray[i].status 
          + "</p><input type='button' value='View Stats' class='viewStatsBtn'></div>"; 
        }

        else if(todayDate.setHours(0, 0, 0, 0) < compareDate.setHours(0, 0, 0, 0)) {
          disGam.innerHTML += "<div class='box0'><h2>Next Game: " + gArray[i].date 
          + "</h2><h3>" + myname + " vs " + gArray[i].opponentname 
          + "</h3><p>" + gArray[i].date + " " + gArray[i].time 
          + "</p><p>" + gArray[i].location 
          + "</p><p>" + gArray[i].status 
          + "</p><input type='button' value='Edit Game' class='editGameBtn'></div>"; 
          break; 
        }

      }












      var gameArray = JSON.parse(localStorage.getItem('games')); 

      for(var x = 0; x < gameArray.length; x++) {

        alert(gameArray[x].time); 




      }


    })
    
    function btnStatus() {
      var username = localStorage.getItem("user");
      if(username != 'coach') {
        document.getElementById('addGameBtn').style.display = 'none';
        document.getElementById('addPracBtn').style.display = 'none';
        document.getElementById('editBtn1').style.display = 'none';
        document.getElementById('editBtn2').style.display = 'none';
      }
    }

    function logoutClean() {
      localStorage.removeItem("user");
    }
  </script>
</body>
</html>
